code.badcop.live {
    # Serve static files from the Vite build
    root * /srv
    file_server

    # Proxy API requests to the Express server
    @notRoot {
        not path /
    }
    reverse_proxy @notRoot express-server:8000

    # Rewrite any unmatched routes to index.html (for single-page app)
    try_files {path} /index.html
}
